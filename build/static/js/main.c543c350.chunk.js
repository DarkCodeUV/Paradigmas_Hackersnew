(this["webpackJsonphackersnews-react-leonardo"]=this["webpackJsonphackersnews-react-leonardo"]||[]).push([[0],{100:function(e,n,t){"use strict";t.r(n);var a=t(11),c=t(2),r=t(66),s=t.n(r),o=(t(85),t(6)),i=t(46),l=t(18),d=t(20),u=t(26),j=t(117),b="auth-token";t(114);function m(e){return function(e,n){var t=6e4,a=36e5,c=864e5,r=2592e6,s=31536e6,o=e-n;return o<2e4?"just now":o<t?"less than 1 min ago":o<a?Math.round(o/t)+" min ago":o<c?Math.round(o/a)+" h ago":o<r?Math.round(o/c)+" days ago":o<s?Math.round(o/r)+" mo ago":Math.round(o/s)+" years ago"}((new Date).getTime(),new Date(e).getTime())}var h,O,p,g,x,v,f=t(1),k=Object(u.a)(h||(h=Object(d.a)(["\n  mutation createVote($linkId: Int!) {\n    createVote(linkId: $linkId) {\n      user {\n        username\n        email\n      }\n      link {\n        url\n        description\n      }\n    }\n  }\n"]))),w=function(e){var n=e.link,t=localStorage.getItem(b),c=Object(j.a)(k,{variables:{linkId:n.id},onCompleted:function(e){var n=e.createVote;console.log(n)},update:function(e,t){var c=t.data.vote,r=e.readQuery({query:y}).links.map((function(e){return e.id===n.id?Object(a.a)(Object(a.a)({},e),{},{votes:[].concat(Object(i.a)(e.votes.edges),[c])}):e}));e.writeQuery({query:y,data:{feed:{links:r}}})}}),r=Object(l.a)(c,1)[0];return Object(f.jsxs)("div",{className:"flex mt2 items-start",children:[Object(f.jsxs)("div",{className:"flex items-center",children:[Object(f.jsxs)("span",{className:"gray",children:[e.index+1,"."]}),t&&Object(f.jsx)("div",{className:"ml1 gray f11",style:{cursor:"pointer"},onClick:r,children:"\u25b2"})]}),Object(f.jsxs)("div",{className:"ml1",children:[Object(f.jsxs)("div",{children:[n.id," - ",n.description," (",n.url,")"]}),t&&Object(f.jsxs)("div",{className:"f6 lh-copy gray",children:[n.votes.edges.length," votes | by"," ",n.postedBy?n.postedBy.username:"Unknown"," ",m(Date().toLocaleString())]})]})]})},y=Object(u.a)(O||(O=Object(d.a)(["\n  {\n  links{\n    id\n    url\n    description\n    postedBy{\n      id\n      email\n      username\n    }\n    votes{\n      edges{\n        node{\n          id\n          link{\n            id\n            url\n            description\n          }\n        }\n      }\n    }\n  }\n}\n"]))),N=Object(u.a)(p||(p=Object(d.a)(["\n  mutation CreateLink(\n    $description: String!\n    $url: String!\n  ) {\n    createLink(description: $description, url: $url) {\n      id\n      url\n      description\n    }\n  }\n"]))),S=function(){var e=Object(o.g)(),n=Object(c.useState)({description:"",url:""}),t=Object(l.a)(n,2),r=t[0],s=t[1],d=Object(j.a)(N,{variables:{description:r.description,url:r.url},update:function(e,n){var t=n.data.post,a={createdAt:"desc"},c=e.readQuery({query:y,variables:{take:5,skip:0,orderBy:a}});e.writeQuery({query:y,data:{feed:{links:[t].concat(Object(i.a)(c.feed.links))}},variables:{take:5,skip:0,orderBy:a}})},onCompleted:function(){return e.push("/new/1")}}),u=Object(l.a)(d,1)[0];return Object(f.jsx)("div",{children:Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),u()},children:[Object(f.jsxs)("div",{className:"flex flex-column mt3",children:[Object(f.jsx)("input",{className:"mb2",value:r.description,onChange:function(e){return s(Object(a.a)(Object(a.a)({},r),{},{description:e.target.value}))},type:"text",placeholder:"A description for the link"}),Object(f.jsx)("input",{className:"mb2",value:r.url,onChange:function(e){return s(Object(a.a)(Object(a.a)({},r),{},{url:e.target.value}))},type:"text",placeholder:"The URL for the link"})]}),Object(f.jsx)("button",{type:"submit",onClick:function(){u(),e.push("/"),window.location.reload()},children:"Submit"})]})})},$=t(21),C=Object(u.a)(g||(g=Object(d.a)(["\nmutation SignupMutation(\n  $email: String!\n  $password: String!\n  $username: String!\n) {\n  createUser(\n    email: $email\n    password: $password\n    username: $username\n  ) {\n   user{\n    id\n    email\n    password\n    username\n  }\n  }\n\n  tokenAuth(username: $username,password: $password){\n  token\n  }\n}\n"]))),I=Object(u.a)(x||(x=Object(d.a)(["\n  mutation TokenAuth(\n    $username: String!\n    $password: String!\n  ) {\n    tokenAuth(username: $username, password: $password) {\n      token\n    }\n  }\n"]))),A=function(){var e=Object(o.g)(),n=Object(c.useState)({login:!0,email:"",password:"",name:""}),t=Object(l.a)(n,2),r=t[0],s=t[1],i=Object(j.a)(I,{variables:{username:r.email,password:r.password},onCompleted:function(n){var t=n.tokenAuth;console.log(t),localStorage.setItem(b,t.token),e.push("/")}}),d=Object(l.a)(i,1)[0];var u=Object(j.a)(C,{variables:{username:r.name,email:r.email,password:r.password},onCompleted:function(n){var t=n.tokenAuth;localStorage.setItem(b,t.token),e.push("/")}}),m=Object(l.a)(u,1)[0];return Object(f.jsxs)("div",{children:[Object(f.jsx)("h4",{className:"mv3",children:r.login?"Login":"Sign Up"}),Object(f.jsxs)("div",{className:"flex flex-column",children:[!r.login&&Object(f.jsx)("input",{value:r.name,onChange:function(e){return s(Object(a.a)(Object(a.a)({},r),{},{name:e.target.value}))},type:"text",placeholder:"Your name"}),Object(f.jsx)("input",{value:r.email,onChange:function(e){return s(Object(a.a)(Object(a.a)({},r),{},{email:e.target.value}))},type:"text",placeholder:"Your name"}),Object(f.jsx)("input",{value:r.password,onChange:function(e){return s(Object(a.a)(Object(a.a)({},r),{},{password:e.target.value}))},type:"password",placeholder:"Choose a safe password"})]}),Object(f.jsxs)("div",{className:"flex mt3",children:[Object(f.jsx)("button",{className:"pointer mr2 button",onClick:function(){r.login?d(r.username,r.password).then((function(){window.location.reload()})):m(r.name,r.password)},children:r.login?"login":"create account"}),Object(f.jsx)("button",{className:"pointer button",onClick:function(e){return s(Object(a.a)(Object(a.a)({},r),{},{login:!r.login}))},children:r.login?"need to create an account?":"already have an account?"})]})]})},B=function(){var e=Object(o.g)(),n=localStorage.getItem(b);return Object(f.jsxs)("div",{className:"flex pa1 justify-between nowrap orange",children:[Object(f.jsxs)("div",{className:"flex flex-fixed black",children:[Object(f.jsx)($.b,{to:"/home",className:"fw7 mr1 no-underline black",children:" Paradigmas "}),Object(f.jsx)("div",{className:"ml1",children:"|"}),Object(f.jsx)($.b,{to:"/top",className:"ml1 no-underline black",children:" Top "}),Object(f.jsx)("div",{className:"ml1",children:"|"}),Object(f.jsx)($.b,{to:"/search",className:"ml1 no-underline black",children:" Buscar "}),n&&Object(f.jsxs)("div",{className:"flex",children:[Object(f.jsx)("div",{className:"ml1",children:"|"}),Object(f.jsx)($.b,{to:"/create",className:"ml1 no-underline black",children:" Agregar Link"})]})]}),Object(f.jsx)("div",{className:"flex flex-fixed",children:n?Object(f.jsx)("div",{className:"ml1 pointer black",onClick:function(){localStorage.removeItem(b),e.push("/login"),window.location.reload()},children:"Salir"}):Object(f.jsx)($.b,{to:"/login",className:"ml1 no-underline black",children:" Ingresar "})})]})},L=t(115),M=Object(u.a)(v||(v=Object(d.a)(["\n  query FeedSearchQuery($search: String) {\n  links(search: $search){\n      id\n      url\n        description\n        postedBy {\n          id\n          username\n        }\n        votes {\n          edges{\n            node{\n              id\n               user {\n                id\n            }\n            }\n          }\n\n        }\n       # createdAt\n  }\n}\n"]))),Q=function(){var e=Object(c.useState)(""),n=Object(l.a)(e,2),t=n[0],a=n[1],r=Object(L.a)(M),s=Object(l.a)(r,2),o=s[0],i=s[1].data;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{children:["Search",Object(f.jsx)("input",{type:"text",onChange:function(e){return a(e.target.value)}}),Object(f.jsx)("button",{onClick:function(){return o({variables:{search:t}})},children:"OK"})]}),i&&i.links.map((function(e,n){return Object(f.jsx)(w,{link:e,index:n},e.id)}))]})},q=t.p+"static/media/elon-ironman.b8b23e0c.jpg",E=function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{className:"home-title",children:"Elon Musk"}),Object(f.jsxs)("div",{align:"center",children:[Object(f.jsx)("img",{src:q,alt:"Elon musk",width:"40%",height:"45%"}),Object(f.jsx)("p",{children:Object(f.jsx)("i",{children:'"Si algo es lo suficientemente importante, incluso si las probabilidades est\xe1n en tu contra, debes seguir intent\xe1ndolo".'})})]})]})},T=function(){return Object(f.jsxs)("div",{className:"center w85",children:[Object(f.jsx)(B,{}),Object(f.jsx)("div",{className:"ph3 pv1 background-gray",children:Object(f.jsxs)(o.d,{children:[Object(f.jsx)(o.b,{exact:!0,path:"/",render:function(){return Object(f.jsx)(o.a,{to:"/new/1"})}}),Object(f.jsx)(o.b,{exact:!0,path:"/home",component:E}),Object(f.jsx)(o.b,{exact:!0,path:"/create",component:S}),Object(f.jsx)(o.b,{exact:!0,path:"/login",component:A}),Object(f.jsx)(o.b,{exact:!0,path:"/search",component:Q})]})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var D=t(70),U=t(71),J=t(72),V=t(52),W=t(25),F=t(101),P=t(99),Y=Object(J.a)({uri:"http://35.232.232.192:8086/graphql/"}),z=Object(D.a)((function(e,n){var t=n.headers,c=localStorage.getItem(b);return{headers:Object(a.a)(Object(a.a)({},t),{},{authorization:c?"JWT ".concat(c):""})}})),G=Object(U.a)((function(e){var n=e.graphQLErrors,t=e.networkError;n&&n.forEach((function(e){var n=e.message,t=e.locations,a=e.path;return console.log("[GraphQL error]: Message: ".concat(n,", Location: ").concat(t,", Path: ").concat(a))})),t&&console.log("[Network error]: ".concat(t))})),K=new V.a({link:Object(W.from)([z,G,Y]),cache:new F.a});s.a.render(Object(f.jsxs)($.a,{children:[Object(f.jsx)(P.a,{client:K,children:Object(f.jsx)(T,{})}),","]}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},85:function(e,n,t){}},[[100,1,2]]]);
//# sourceMappingURL=main.c543c350.chunk.js.map